전자정부 3년 전에 끝났는데 ...
- LG CNS에서 담당, 규모가 정말 큰 국가 사업
  근데 결과는 잘 안 됐다

- 아노말리 Anomaly
삽입 이상
삭제 이상
갱신 이상

75s
팀 번호를 부여받지 못하면 여기 테이블에 선수 데이터를 추가할 수 없다 - 삽입 아노말리
선수 인스턴스 삭제시 팀의 데이터도 삭제된다 - 삭제 아노말리
- 업데이트 아노말리

이중 가장 큰 문제는 삭제 아노말리
이런 이상(Anomaly)을 줄이고자 정규화 진행

//분산된 Distributed

- 77s 정규화

#주문번호	고객번호		주문일자		상품번호 FK	주문수량
100		a001		오늘		p101		5
101		a001		"		p201		10
102		a001		"		p300		2
102		a001		그저께		p300		2

비용 : 상품번호 외래키로 단가 들고와서 X 주문수량 해주면 결제비용 구할 수 있다
주문번호로 알아야 하는데, 모른다 고객번호로도 안돼. 
주문일자 그저께하면 안묶여, 그러니까 고객번호, 주문일자 같이 묶어서 ? X
여기 시간까지 있어야 묶을 수 있는데 계산 불가


2)처럼 고쳤어
문제는 3개 이상 못 써, 3품목 이상 못 사.
1품목만 사면 나머지 2품목은 NULL처리가 되고.
윈도우 쇼핑만 하면 전부 NULL처리 되고.
이것들, 속성 반복, 1)은 고객번호 컬럼값이 중복


- 프로젝트 진행하며 만들 상품 테이블에는 ...
상품번호 또는 상품코드로 이름붙여진 상품이 있어야 한다
->
상품 (릴레이션)
ㅁ#상품번호
ㅁ*상품명
ㅁ*가격

고객 (릴레이션)
ㅁ#고객번호
ㅁ*고객명
ㅁ*주소

두 릴레이션 사이의 다대다 관계를 변경 -> 그 사이를 전부 관계-릴레이션으로 변경 // 릴레이션쉽?
->
주문 (릴레이션)
ㅁ#주문번호 (PK)
ㅁ*고객번호 (FK)
ㅁ*주문일자

상품 번호와 주문 수량이 atomic value가 아니라 문제
->
주문_상품 (릴레이션)
ㅁ#주문번호
ㅁ#상품번호
ㅁ*주문수량

주문 (릴레이션)			주문_상품 (릴레이션)
#주문번호  고객	일자		주문번호	상품	수량	
100	  a001	오늘		100	p101	5    
				100	p201	10
				100	p300	5

결제 금액 => sum() ... 을 통해 계산되어질 항목
금액은 왼쪽, 오른쪽에 없애도 된다, 언제든 구할 수 있으니,
그러니까 결제금액은 테이블에 넣는 게 아니다
근데 부를 때마다 sum을 쓸 거냐,
만약 속도를 빨리 하고 싶으면 금액도 추가.
->
주문 (릴레이션)
ㅁ#주문번호 (PK)
ㅁ*고객번호 (FK)
ㅁ*주문일자
ㅁ*금액

주문 릴레이션은 내가 취소를 했어도 가지고 있어야 한다
언제 취소하고 언제 반품하는지 알아야 하기 때문
->상태 필수항목 추가
=>
주문 (릴레이션)
ㅁ#주문번호 (PK)
ㅁ*고객번호 (FK)
ㅁ*주문일자
ㅁ*금액
ㅁ*상태 (ex.0이면 정상처리, 1이면 환불, 2이면 구매취소)


결제 (릴레이션)
ㅁ#결제번호
ㅁ*금액
ㅁ*결제일자
ㅁ*결제수단


결제수단 (릴레이션)
ㅁ#결제수단
ㅁ*이름


결제수단을, 섞어 쓰는 것을 허용하면,
일대다 관계가 되고
ex.포인트 결제 + 남은 금액은 카드결제

결제수단을 하나만 허용하면
결제수단과 결제는 일대일 관계
ex.카드결제만 허용

-- 쉬는시간

- 81s  2정규화 

학생들이 프로젝트할 때
제1정규화까지 시키지, 2정규화까지 시키지 않는다
3정규화는 지키지 않더라도 문제가 발생할 확률이 적다

우편주소가 바뀌면 기본주소가 전부 바뀌는 그런 일이 잘 없다.
추가되는 부분만 업데이트 되기 때문에, 신뢰성 유지를 위해 잘 안 바꾼다
우편번호 체계가 바뀌기 전까지 그럴일은X -> 추가는 할 수 있다
추가를 아주 많이, 건물마다 우편번호가 있으니.
우편번호는 거의 매일 업데이트된다
내용이 바뀌는 경우는 거의 없고, 추가/삭제가 많이 이루어진다

크게 잘못되어지는 경우가 거의없다
이상현상이 발생되어지지 않는 정도면
굳이 별도의 릴레이션으로 관리하는 것보다,
비용면에서 효율적이라고 생각되면 기존대로 쓰면 된다 : 역정규화
정규화를 했을 때의 이익이 더 작다면, 정규화 안 시키고 사용


89s
BC 정규화 // 보이스코드 정규화

후보식별자가 아니어야 하는데 후보식별자가 되어 버렸다.







































































