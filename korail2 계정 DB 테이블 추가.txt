/* 이벤트 */
CREATE TABLE EVENT (
	EVENT_NO NUMBER(5) NOT NULL, /* 이벤트 번호 */
	MIN_AGE NUMBER(10), /* 최소 나이 */
	MAX_AGE NUMBER(10), /* 최대 나이 */
	MEM_DEFECT CHAR(1), /* 장애 여부 */
	EVENT_NAME VARCHAR2(100), /* 이벤트 이름 */
	DISCOUNT_RATE NUMBER(5), /* 할인율 */
	EVENT_CON VARCHAR2(500) /* 이벤트 내용 */
);

COMMENT ON TABLE EVENT IS '이벤트';

COMMENT ON COLUMN EVENT.EVENT_NO IS '이벤트 번호';

COMMENT ON COLUMN EVENT.MIN_AGE IS '최소 나이';

COMMENT ON COLUMN EVENT.MAX_AGE IS '최대 나이';

COMMENT ON COLUMN EVENT.MEM_DEFECT IS '장애 여부';

COMMENT ON COLUMN EVENT.EVENT_NAME IS '이벤트 이름';

COMMENT ON COLUMN EVENT.DISCOUNT_RATE IS '할인율';

COMMENT ON COLUMN EVENT.EVENT_CON IS '이벤트 내용';

CREATE UNIQUE INDEX PK_EVENT
	ON EVENT (
		EVENT_NO ASC
	);

/* 공지사항 */
CREATE TABLE NOTICE_BOARD (
	NOTICE_NO NUMBER(10) NOT NULL, /* 게시글 번호 */
	TITLE VARCHAR2(10), /* 제목 */
	MEM_NO VARCHAR2(100), /* 작성자 */
	CONTENT VARCHAR2(500), /* 내용 */
	REGDATE DATE, /* 작성일 */
	hits NUMBER(10) /* 조회수 */
);

COMMENT ON TABLE NOTICE_BOARD IS '공지사항';

COMMENT ON COLUMN NOTICE_BOARD.NOTICE_NO IS '게시글 번호';

COMMENT ON COLUMN NOTICE_BOARD.TITLE IS '제목';

COMMENT ON COLUMN NOTICE_BOARD.MEM_NO IS '작성자';

COMMENT ON COLUMN NOTICE_BOARD.CONTENT IS '내용';

COMMENT ON COLUMN NOTICE_BOARD.REGDATE IS '작성일';

COMMENT ON COLUMN NOTICE_BOARD.hits IS '조회수';

CREATE UNIQUE INDEX PK_NOTICE_BOARD
	ON NOTICE_BOARD (
		NOTICE_NO ASC
	);

/* 문의 게시판 */
CREATE TABLE INQUIRY (
	INIQUIRY_NO NUMBER(10) NOT NULL, /* 게시글 번호 */
	MEM_NO VARCHAR2(100), /* 작성자 */
	TITLE VARCHAR2(50), /* 제목 */
	CONTENT VARCHAR2(500), /* 내용 */
	REGDATE DATE, /* 작성일 */
	Q_NO NUMBER(10), /* 문의번호 */
	I_PASS VARCHAR2(20) /* 비밀번호 */
);

COMMENT ON TABLE INQUIRY IS '문의 게시판';

COMMENT ON COLUMN INQUIRY.INIQUIRY_NO IS '게시글 번호';

COMMENT ON COLUMN INQUIRY.MEM_NO IS '작성자';

COMMENT ON COLUMN INQUIRY.TITLE IS '제목';

COMMENT ON COLUMN INQUIRY.CONTENT IS '내용';

COMMENT ON COLUMN INQUIRY.REGDATE IS '작성일';

COMMENT ON COLUMN INQUIRY.Q_NO IS '문의번호';

COMMENT ON COLUMN INQUIRY.I_PASS IS '비밀번호';

CREATE UNIQUE INDEX PK_INQUIRY
	ON INQUIRY (
		INIQUIRY_NO ASC
	);

/* 회원 */
CREATE TABLE MEMBER (
	MEM_NO VARCHAR2(100) NOT NULL, /* 회원 번호 */
	MEM_NAME VARCHAR2(100) NOT NULL, /* 고객명 */
	MEM_PHONE VARCHAR2(100), /* 연락처 */
	MEM_MAIL VARCHAR2(100), /* 이메일 */
	MEM_ID VARCHAR2(100), /* 아이디 */
	MEM_PASS VARCHAR2(100), /* 비밀번호 */
	MEM_CODE VARCHAR2(100), /* 우편번호 */
	MEM_ADDRESS VARCHAR2(100), /* 상세주소 */
	MEM_MILEAGE NUMBER(30), /* 마일리지 */
	MEM_DEFECT CHAR(1), /* 장애여부 */
	ADMIN_CHECK CHAR(1), /* 관리자권한 */
	MEM_BIRTH DATE /* 생년월일 */
);

COMMENT ON TABLE MEMBER IS '회원';

COMMENT ON COLUMN MEMBER.MEM_NO IS '회원 번호';

COMMENT ON COLUMN MEMBER.MEM_NAME IS '고객명';

COMMENT ON COLUMN MEMBER.MEM_PHONE IS '연락처';

COMMENT ON COLUMN MEMBER.MEM_MAIL IS '이메일';

COMMENT ON COLUMN MEMBER.MEM_ID IS '아이디';

COMMENT ON COLUMN MEMBER.MEM_PASS IS '비밀번호';

COMMENT ON COLUMN MEMBER.MEM_CODE IS '우편번호';

COMMENT ON COLUMN MEMBER.MEM_ADDRESS IS '상세주소';

COMMENT ON COLUMN MEMBER.MEM_MILEAGE IS '마일리지';

COMMENT ON COLUMN MEMBER.MEM_DEFECT IS '장애여부';

COMMENT ON COLUMN MEMBER.ADMIN_CHECK IS '관리자권한';

COMMENT ON COLUMN MEMBER.MEM_BIRTH IS '생년월일';

CREATE UNIQUE INDEX PK_MEMBER
	ON MEMBER (
		MEM_NO ASC
	);

/* 예약 */
CREATE TABLE RESERVATION (
	RES_NO VARCHAR2(20) NOT NULL, /* 예약 번호 */
	MEM_NO VARCHAR2(100), /* 회원 번호 */
	PAY_CHECK VARCHAR2(5), /* 결제 여부 */
	PAYMENT VARCHAR2(50), /* 결제 수단 */
	RES_DATE DATE, /* 예약 일자 */
	TOTAL_PRICE NUMBER(10) /* 총 금액 */
);

COMMENT ON TABLE RESERVATION IS '예약';

COMMENT ON COLUMN RESERVATION.RES_NO IS '예약 번호';

COMMENT ON COLUMN RESERVATION.MEM_NO IS '회원 번호';

COMMENT ON COLUMN RESERVATION.PAY_CHECK IS '결제 여부';

COMMENT ON COLUMN RESERVATION.PAYMENT IS '결제 수단';

COMMENT ON COLUMN RESERVATION.RES_DATE IS '예약 일자';

COMMENT ON COLUMN RESERVATION.TOTAL_PRICE IS '총 금액';

CREATE UNIQUE INDEX PK_RESERVATION
	ON RESERVATION (
		RES_NO ASC
	);

/* 예약 좌석 */
CREATE TABLE RESERVED_SEAT (
	RES_NO VARCHAR2(20) NOT NULL, /* 예약 번호 */
	SEAT_NO VARCHAR2(10) NOT NULL, /* 좌석 번호 */
	HO_NO NUMBER(10) NOT NULL, /* 호차 번호 */
	TRAIN_NO VARCHAR2(10) NOT NULL, /* 열차 번호 */
	END_STATION VARCHAR2(20) NOT NULL, /* 도착역 */
	START_STATION VARCHAR2(20) NOT NULL, /* 출발역 */
	START_TIME DATE NOT NULL, /* 출발 시각 */
	END_TIME DATE NOT NULL, /* 도착 시각 */
	LINE_NO VARCHAR2(20) NOT NULL, /* 노선 번호 */
	VIP_CHECK CHAR(1) /* 특실 */
);

COMMENT ON TABLE RESERVED_SEAT IS '예약 좌석';

COMMENT ON COLUMN RESERVED_SEAT.RES_NO IS '예약 번호';

COMMENT ON COLUMN RESERVED_SEAT.SEAT_NO IS '좌석 번호';

COMMENT ON COLUMN RESERVED_SEAT.HO_NO IS '호차 번호';

COMMENT ON COLUMN RESERVED_SEAT.TRAIN_NO IS '열차 번호';

COMMENT ON COLUMN RESERVED_SEAT.END_STATION IS '도착역';

COMMENT ON COLUMN RESERVED_SEAT.START_STATION IS '출발역';

COMMENT ON COLUMN RESERVED_SEAT.START_TIME IS '출발 시각';

COMMENT ON COLUMN RESERVED_SEAT.END_TIME IS '도착 시각';

COMMENT ON COLUMN RESERVED_SEAT.LINE_NO IS '노선 번호';

COMMENT ON COLUMN RESERVED_SEAT.VIP_CHECK IS '특실';

CREATE UNIQUE INDEX PK_RESERVED_SEAT
	ON RESERVED_SEAT (
		RES_NO ASC,
		SEAT_NO ASC,
		HO_NO ASC,
		TRAIN_NO ASC,
		END_STATION ASC,
		START_STATION ASC,
		START_TIME ASC,
		END_TIME ASC,
		LINE_NO ASC
	);

/* 노선 시간표 */
CREATE TABLE LINE_TIME (
	END_TIME DATE NOT NULL, /* 도착 시각 */
	START_TIME DATE NOT NULL, /* 출발 시각 */
	LINE_NO VARCHAR2(20) NOT NULL /* 노선 번호 */
);

COMMENT ON TABLE LINE_TIME IS '노선 시간표';

COMMENT ON COLUMN LINE_TIME.END_TIME IS '도착 시각';

COMMENT ON COLUMN LINE_TIME.START_TIME IS '출발 시각';

COMMENT ON COLUMN LINE_TIME.LINE_NO IS '노선 번호';

CREATE UNIQUE INDEX PK_LINE_TIME
	ON LINE_TIME (
		END_TIME ASC,
		START_TIME ASC,
		LINE_NO ASC
	);

/* 열차 좌석 */
CREATE TABLE SEAT (
	HO_NO NUMBER(10) NOT NULL, /* 호차 번호 */
	TRAIN_NO VARCHAR2(10) NOT NULL, /* 열차 번호 */
	LINE_NO VARCHAR2(20) NOT NULL, /* 노선 번호 */
	SEAT_MAX NUMBER(10), /* 좌석 개수 */
	VIP_CHECK CHAR(1) /* 특실 */
);

COMMENT ON TABLE SEAT IS '열차 좌석';

COMMENT ON COLUMN SEAT.HO_NO IS '호차 번호';

COMMENT ON COLUMN SEAT.TRAIN_NO IS '열차 번호';

COMMENT ON COLUMN SEAT.LINE_NO IS '노선 번호';

COMMENT ON COLUMN SEAT.SEAT_MAX IS '좌석 개수';

COMMENT ON COLUMN SEAT.VIP_CHECK IS '특실';

CREATE UNIQUE INDEX PK_SEAT
	ON SEAT (
		HO_NO ASC,
		TRAIN_NO ASC,
		LINE_NO ASC
	);

/* 노선 */
CREATE TABLE LINE (
	LINE_NO VARCHAR2(20) NOT NULL /* 노선 번호 */
);

COMMENT ON TABLE LINE IS '노선';

COMMENT ON COLUMN LINE.LINE_NO IS '노선 번호';

CREATE UNIQUE INDEX PK_LINE
	ON LINE (
		LINE_NO ASC
	);

/* 노선 루트 */
CREATE TABLE LINE_ROUTE (
	LINE_NO VARCHAR2(20) NOT NULL, /* 노선 번호 */
	END_STATION VARCHAR2(20) NOT NULL, /* 도착역 */
	START_STATION VARCHAR2(20) NOT NULL, /* 출발역 */
	STATION_ORDER NUMBER(10), /* 역 순서 */
	TIME_ENROUTE NUMBER(10) /* 걸리는 시간 */
);

COMMENT ON TABLE LINE_ROUTE IS '노선 루트';

COMMENT ON COLUMN LINE_ROUTE.LINE_NO IS '노선 번호';

COMMENT ON COLUMN LINE_ROUTE.END_STATION IS '도착역';

COMMENT ON COLUMN LINE_ROUTE.START_STATION IS '출발역';

COMMENT ON COLUMN LINE_ROUTE.STATION_ORDER IS '역 순서';

COMMENT ON COLUMN LINE_ROUTE.TIME_ENROUTE IS '걸리는 시간';

CREATE UNIQUE INDEX PK_LINE_ROUTE
	ON LINE_ROUTE (
		LINE_NO ASC,
		END_STATION ASC,
		START_STATION ASC
	);

/* 열차 */
CREATE TABLE TRAIN (
	TRAIN_NO VARCHAR2(10) NOT NULL, /* 열차 번호 */
	LINE_NO VARCHAR2(20) NOT NULL, /* 노선 번호 */
	TRAIN_CLASS_NO VARCHAR2(10) /* 열차 분류 번호 */
);

COMMENT ON TABLE TRAIN IS '열차';

COMMENT ON COLUMN TRAIN.TRAIN_NO IS '열차 번호';

COMMENT ON COLUMN TRAIN.LINE_NO IS '노선 번호';

COMMENT ON COLUMN TRAIN.TRAIN_CLASS_NO IS '열차 분류 번호';

CREATE UNIQUE INDEX PK_TRAIN
	ON TRAIN (
		TRAIN_NO ASC,
		LINE_NO ASC
	);

/* 열차 분류 */
CREATE TABLE TRAIN_CLASS (
	TRAIN_CLASS_NO VARCHAR2(10) NOT NULL, /* 열차 분류 번호 */
	TRAIN_CLASS_NAME VARCHAR2(20) /* 열차 종류 이름 */
);

COMMENT ON TABLE TRAIN_CLASS IS '열차 분류';

COMMENT ON COLUMN TRAIN_CLASS.TRAIN_CLASS_NO IS '열차 분류 번호';

COMMENT ON COLUMN TRAIN_CLASS.TRAIN_CLASS_NAME IS '열차 종류 이름';

CREATE UNIQUE INDEX PK_TRAIN_CLASS
	ON TRAIN_CLASS (
		TRAIN_CLASS_NO ASC
	);

/* 역 */
CREATE TABLE STATION (
	STATION_NO VARCHAR2(20) NOT NULL, /* 역 번호 */
	STATION_ADDRESS VARCHAR2(100), /* 주소 */
	STATION_PHONE VARCHAR2(100), /* 전화번호 */
	STATION_NAME VARCHAR2(20) /* 역 이름 */
);

COMMENT ON TABLE STATION IS '역';

COMMENT ON COLUMN STATION.STATION_NO IS '역 번호';

COMMENT ON COLUMN STATION.STATION_ADDRESS IS '주소';

COMMENT ON COLUMN STATION.STATION_PHONE IS '전화번호';

COMMENT ON COLUMN STATION.STATION_NAME IS '역 이름';

CREATE UNIQUE INDEX PK_STATION
	ON STATION (
		STATION_NO ASC
	);

/* 요금 */
CREATE TABLE CHARGE (
	TRAIN_CLASS_NO VARCHAR2(10) NOT NULL, /* 열차 분류 번호 */
	END_STATION VARCHAR2(20) NOT NULL, /* 도착역 */
	START_STATION VARCHAR2(20) NOT NULL, /* 출발역 */
	PRICE_NORMAL NUMBER(10), /* 요금 */
	PRICE_VIP NUMBER(10) /* 특실 요금 */
);

COMMENT ON TABLE CHARGE IS '요금';

COMMENT ON COLUMN CHARGE.TRAIN_CLASS_NO IS '열차 분류 번호';

COMMENT ON COLUMN CHARGE.END_STATION IS '도착역';

COMMENT ON COLUMN CHARGE.START_STATION IS '출발역';

COMMENT ON COLUMN CHARGE.PRICE_NORMAL IS '요금';

COMMENT ON COLUMN CHARGE.PRICE_VIP IS '특실 요금';

CREATE UNIQUE INDEX PK_CHARGE
	ON CHARGE (
		TRAIN_CLASS_NO ASC,
		END_STATION ASC,
		START_STATION ASC
	);